# render.yaml para deploy com Docker
# Use este arquivo se quiser usar Blueprint no Render
# 
# IMPORTANTE: Se você já tem um banco de dados criado,
# remova a seção "databases" abaixo e configure as variáveis
# de ambiente manualmente no Dashboard do Render

services:
  - type: web
    name: sistema-agricola-api
    env: docker
    region: oregon
    plan: free
    dockerfilePath: ./Dockerfile
    dockerContext: .
    envVars:
      - key: SPRING_PROFILES_ACTIVE
        value: prod
      - key: JAVA_VERSION
        value: 21
      # Se você TEM um banco existente, remova as 3 variáveis abaixo
      # e configure manualmente no Dashboard com as credenciais do seu banco
      - key: SPRING_DATASOURCE_URL
        fromDatabase:
          name: sistema-agricola-db
          property: connectionString
      - key: SPRING_DATASOURCE_USERNAME
        fromDatabase:
          name: sistema-agricola-db
          property: user
      - key: SPRING_DATASOURCE_PASSWORD
        fromDatabase:
          name: sistema-agricola-db
          property: password
      # JWT_SECRET deve ser gerado e configurado manualmente
      # Não use generateValue em produção - gere uma chave segura
      - key: JWT_EXPIRATION
        value: 86400000

# Se você JÁ TEM um banco de dados, REMOVA ou COMENTE a seção abaixo
# Se você QUER criar um novo banco, mantenha esta seção
databases:
  - name: sistema-agricola-db
    databaseName: sistema_agricola
    user: sistema_user
    plan: free

